/*! seamless.js 2014-10-06 */
!function(a,b,c){c.SeamlessBase={getParam:function(b,c){c=c||a.location.search;var d="[?&]"+b+"=([^&#]*)",e=new RegExp(d),f=e.exec(c);return null===f?"":decodeURIComponent(f[1].replace(/\+/g," "))},filterText:function(a){return a.replace(/[<>]/g,"")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},setStyle:function(a,b){b.length>0&&(b="string"==typeof b?b:b.join(" "),b=c.SeamlessBase.filterText(b),a.styleSheet?a.styleSheet.cssText=b:c(a).html(b))},injectStyles:function(a){var d=c("style#injected-styles");if(d.length>0)c.SeamlessBase.setStyle(d[0],a);else{var e=c(b.createElement("style")).attr({type:"text/css",id:"injected-styles"});c.SeamlessBase.setStyle(e[0],a),c("head").append(e)}}}}(window,document,jQuery),function(a,b,c){c.SeamlessConnection=function(a,b){this.id=0,this.target=a,this.url=b,this.active=!1,this.queue=[]},c.SeamlessConnection.prototype.send=function(a){this.active&&this.target?(a=a||{},a.hasOwnProperty("data")||(a={data:a}),a.target=this.target,a.url=this.url,a.type=a.type||"seamless_data",a.data=a.data||{},a.data.__id=this.id,c.pm(a)):this.queue.push(a)},c.SeamlessConnection.prototype.receive=function(a,b){"function"==typeof a&&(b=a,a="seamless_data");var d=this;c.pm.bind(a,function(a,c){return a.__id&&a.__id===d.id?b(a,c):!1})},c.SeamlessConnection.prototype.setActive=function(a){if(this.active=a,this.queue.length>0){for(var b in this.queue)this.send(this.queue[b]);this.queue=[],this.queue.length=0}}}(window,document,jQuery),function(a,b,c,d){if(!c.hasOwnProperty("pm"))return void console.log("You must install the jQuery.pm module to use seamless.js.");c.pm.bind("seamless_noiframe",function(b){b.href=b.href.replace(/noiframe\=[^&?#]+/,""),a.location.replace(b.href)}),a.seamlessOpenFallback=function(b,c,d,e){e.preventDefault?(e.preventDefault(),e.stopPropagation()):e.returnValue=!1,a.open(b,"",["width="+c,"height="+d,"menubar=no","titlebar=no","toolbar=no","status=no","scrollbars=yes","chrome=yes"].join(","))};var e=[],f=!1,g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),h=function(){for(var a=[],b=0;32>b;b++)a[b]=g[0|32*Math.random()];return a.join("")};c.pm.bind("seamless_ready",function(a,b){if(!f){f=!0;for(var c in e)e.hasOwnProperty(c)&&e[c].seamless_ready(a,b);f=!1}}),c.pm.bind("seamless_update",function(a,b){for(var c in e)if(e.hasOwnProperty(c)){var d=e[c];if(d.connection.id===a.__id)return d.seamless_update(a,b)}return a.height=0,a}),c.pm.bind("seamless_error",function(a,b){for(var c in e)e.hasOwnProperty(c)&&e[c].seamless_error(a,b)}),c.fn.seamless=function(f){var g={showLoadingIndicator:!0,loading:"Loading ...",spinner:"http://www.travistidwell.com/seamless.js/src/loader.gif",onConnect:null,styles:[],fallback:!0,fallbackParams:"",fallbackText:"",fallbackLinkText:"Click here",fallbackLinkAfter:" to open in a separate window.",fallbackStyles:["padding: 15px","border: 1px solid transparent","border-radius: 4px","color: #3a87ad","background-color: #d9edf7","border-color: #bce8f1"],fallbackLinkStyles:["display: inline-block","color: #333","border: 1px solid #ccc","background-color: #fff","padding: 5px 10px","text-decoration: none","font-size: 12px","line-height: 1.5","border-radius: 6px","font-weight: 400","cursor: pointer","-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","user-select: none"],fallbackLinkHoverStyles:["background-color:#ebebeb","border-color:#adadad"],fallbackWindowWidth:960,fallbackWindowHeight:800};f=f||{};for(var i in g)f.hasOwnProperty(i)||(f[i]=g[i]);var j=c(this).eq(0);j.seamless_options=f,e.push(j);var k=(j.attr("name")||j.attr("id"),j.attr("src"));if(j.connection=new c.SeamlessConnection(j[0].contentWindow,k),j.send=function(a){j.connection.send.call(j.connection,a)},j.receive=function(a,b){j.connection.receive.call(j.connection,a,b)},j.attr({scrolling:"no",seamless:"seamless",width:"100%",height:"0px",marginheight:"0",marginwidth:"0",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no"}).css({border:"none",overflowY:"hidden"}),f.showLoadingIndicator){var l=c(b.createElement("div"));l.css({background:"url("+f.spinner+") no-repeat 10px 13px",padding:"10px 10px 10px 60px",width:"100%"}),l.append(f.loading),j.before(l)}var m=!0,n=function(){m=!1,l!==d&&l.remove()};if(f.fallback){f.fallbackParams&&(k+=-1===k.search(/\?/)?"?":"&",k+=f.fallbackParams);var o=c("#seamless-fallback-styles");if(!o.length){var p=function(a){return c.SeamlessBase.filterText(a.join(";"))};o=c(b.createElement("style")).attr({id:"seamless-fallback-styles",type:"text/css"}),c.SeamlessBase.setStyle(o[0],".seamless-fallback.seamless-styles {"+p(f.fallbackStyles)+"}.seamless-fallback em { padding: 5px; }.seamless-fallback-link.seamless-styles {"+p(f.fallbackLinkStyles)+"}.seamless-fallback-link.seamless-styles:hover {"+p(f.fallbackLinkHoverStyles)+"}"),j.before(o)}var q=['"'+k+'"',f.fallbackWindowWidth,f.fallbackWindowHeight],r=c(b.createElement("a")).attr({"class":"seamless-fallback-link",href:"#",onclick:"seamlessOpenFallback("+q.join(",")+", event)"}),s=c(b.createElement("div")).attr({"class":"seamless-fallback"});s.append(c(b.createElement("em"))),j.after(s);var t=function(a,b,d,e){e?(s.addClass("seamless-styles"),r.addClass("seamless-styles")):(s.removeClass("seamless-styles"),r.removeClass("seamless-styles")),s.find("em").text(c.SeamlessBase.filterText(a)+" ").append(r.text(c.SeamlessBase.filterText(b))).append(c.SeamlessBase.filterText(d))};f.fallbackText&&t(f.fallbackText,f.fallbackLinkText,f.fallbackLinkAfter,!1),c(a).error(function(){var a="An error has been detected on this page, ";a+="which may cause problems with the operation of this application.",t(a,f.fallbackLinkText,f.fallbackLinkAfter,!0)}),setTimeout(function(){m&&(n(),t("An error has been detected on this page.",f.fallbackLinkText,f.fallbackLinkAfter,!0))},3e4)}return j.seamless_ready=function(){j.connection.id||(j.connection.id=h());var a={id:j.connection.id,styles:j.seamless_options.styles};j.connection.target||(j.connection.target=j[0].contentWindow),c.pm({type:"seamless_connect",target:j.connection.target,url:j.connection.url,data:a,success:function(a){j.seamless_options.onConnect&&j.seamless_options.onConnect(a)}}),j.trigger("connected")},j.seamless_update=function(a){return m&&(n(),j.connection.setActive(!0)),a.height>=0&&j.height(a.height).attr("height",a.height+"px"),a},j.seamless_error=function(a){n(),j.hide(),t(a.msg,a.linkText,a.afterText,!0)},j}}(window,document,jQuery);