/*! seamless.js 2014-09-12 */
!function(a,b,c){c.SeamlessBase={getParam:function(b,c){c=c||a.location.search;var d="[?&]"+b+"=([^&#]*)",e=new RegExp(d),f=e.exec(c);return null===f?"":decodeURIComponent(f[1].replace(/\+/g," "))},filterText:function(a){return a.replace(/[<>]/g,"")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},setStyle:function(a,b){b.length>0&&(b="string"==typeof b?b:b.join(" "),b=c.SeamlessBase.filterText(b),a.styleSheet?a.styleSheet.cssText=b:c(a).html(b))},injectStyles:function(a){var d=c("style#injected-styles");if(d.length>0)c.SeamlessBase.setStyle(d[0],a);else{var e=c(b.createElement("style")).attr({type:"text/css",id:"injected-styles"});c.SeamlessBase.setStyle(e[0],a),c("head").append(e)}}}}(window,document,jQuery),function(a,b,c){c.SeamlessConnection=function(a,b){this.id=0,this.target=a,this.url=b,this.active=!1,this.queue=[]},c.SeamlessConnection.prototype.send=function(a){this.active&&this.target?(a.hasOwnProperty("data")||(a={data:a}),a.target=this.target,a.url=this.url,a.type=a.type||"seamless_data",a.data=a.data||{},a.data.__id=this.id,c.pm(a)):this.queue.push(a)},c.SeamlessConnection.prototype.receive=function(a,b){"function"==typeof a&&(b=a,a="seamless_data");var d=this;c.pm.bind(a,function(a,c){return a.__id&&a.__id===d.id?b(a,c):!1})},c.SeamlessConnection.prototype.setActive=function(a){if(this.active=a,this.queue.length>0){for(var b in this.queue)this.send(this.queue[b]);this.queue=[],this.queue.length=0}}}(window,document,jQuery),function(a,b,c){if(!c.hasOwnProperty("pm"))return void console.log("You must install the jQuery.pm module to use seamless.js.");c.pm.bind("seamless_noiframe",function(b){b.href=b.href.replace(/noiframe\=[^&?#]+/,""),a.location.replace(b.href)}),a.seamlessOpenFallback=function(b,c,d,e){e.preventDefault?(e.preventDefault(),e.stopPropagation()):e.returnValue=!1,a.open(b,"",["width="+c,"height="+d,"menubar=no","titlebar=no","toolbar=no","status=no","scrollbars=yes","chrome=yes"].join(","))};var d=[],e=!1,f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),g=function(){for(var a=[],b=0;32>b;b++)a[b]=f[0|32*Math.random()];return a.join("")};c.pm.bind("seamless_ready",function(a,b){if(!e){e=!0;for(var c in d)d.hasOwnProperty(c)&&d[c].seamless_ready(a,b);e=!1}}),c.pm.bind("seamless_update",function(a,b){for(var c in d)if(d.hasOwnProperty(c)){var e=d[c];if(e.connection.id===a.__id)return e.seamless_update(a,b)}return a.height=0,a}),c.pm.bind("seamless_error",function(a,b){for(var c in d)d.hasOwnProperty(c)&&d[c].seamless_error(a,b)}),c.fn.seamless=function(e){var f={loading:"Loading ...",spinner:"http://www.travistidwell.com/seamless.js/src/loader.gif",onConnect:null,styles:[],fallback:!0,fallbackParams:"",fallbackText:"",fallbackLinkText:"Click here",fallbackLinkAfter:" to open in a separate window.",fallbackStyles:["padding: 15px","border: 1px solid transparent","border-radius: 4px","color: #3a87ad","background-color: #d9edf7","border-color: #bce8f1"],fallbackLinkStyles:["display: inline-block","color: #333","border: 1px solid #ccc","background-color: #fff","padding: 5px 10px","text-decoration: none","font-size: 12px","line-height: 1.5","border-radius: 6px","font-weight: 400","cursor: pointer","-webkit-user-select: none","-moz-user-select: none","-ms-user-select: none","user-select: none"],fallbackLinkHoverStyles:["background-color:#ebebeb","border-color:#adadad"],fallbackWindowWidth:960,fallbackWindowHeight:800};e=e||{};for(var h in f)e.hasOwnProperty(h)||(e[h]=f[h]);var i=c(this).eq(0);i.seamless_options=e,d.push(i);var j=(i.attr("name")||i.attr("id"),i.attr("src"));i.connection=new c.SeamlessConnection(i[0].contentWindow,j),i.send=function(a){i.connection.send.call(i.connection,a)},i.receive=function(a,b){i.connection.receive.call(i.connection,a,b)},i.attr({scrolling:"no",seamless:"seamless",width:"100%",height:"0px",marginheight:"0",marginwidth:"0",frameborder:"0",horizontalscrolling:"no",verticalscrolling:"no"}).css({border:"none",overflowY:"hidden"});var k=c(b.createElement("div")).css({background:"url("+e.spinner+") no-repeat 10px 13px",padding:"10px 10px 10px 60px",width:"100%"}),l=!0;if(k.append(e.loading),i.before(k),e.fallback){e.fallbackParams&&(j+=-1===j.search(/\?/)?"?":"&",j+=e.fallbackParams);var m=c("#seamless-fallback-styles");if(!m.length){var n=function(a){return c.SeamlessBase.filterText(a.join(";"))};m=c(b.createElement("style")).attr({id:"seamless-fallback-styles",type:"text/css"}),c.SeamlessBase.setStyle(m[0],".seamless-fallback.seamless-styles {"+n(e.fallbackStyles)+"}.seamless-fallback em { padding: 5px; }.seamless-fallback-link.seamless-styles {"+n(e.fallbackLinkStyles)+"}.seamless-fallback-link.seamless-styles:hover {"+n(e.fallbackLinkHoverStyles)+"}"),i.before(m)}var o=['"'+j+'"',e.fallbackWindowWidth,e.fallbackWindowHeight],p=c(b.createElement("a")).attr({"class":"seamless-fallback-link",href:"#",onclick:"seamlessOpenFallback("+o.join(",")+", event)"}),q=c(b.createElement("div")).attr({"class":"seamless-fallback"});q.append(c(b.createElement("em"))),i.after(q);var r=function(a,b,d,e){e?(q.addClass("seamless-styles"),p.addClass("seamless-styles")):(q.removeClass("seamless-styles"),p.removeClass("seamless-styles")),q.find("em").text(c.SeamlessBase.filterText(a)+" ").append(p.text(c.SeamlessBase.filterText(b))).append(c.SeamlessBase.filterText(d))};e.fallbackText&&r(e.fallbackText,e.fallbackLinkText,e.fallbackLinkAfter,!1),c(a).error(function(){var a="An error has been detected on this page, ";a+="which may cause problems with the operation of this application.",r(a,e.fallbackLinkText,e.fallbackLinkAfter,!0)}),setTimeout(function(){l&&(k.remove(),l=!1,r("An error has been detected on this page.",e.fallbackLinkText,e.fallbackLinkAfter,!0))},3e4)}return i.seamless_ready=function(){i.connection.id||(i.connection.id=g());var a={id:i.connection.id,styles:i.seamless_options.styles};i.connection.target||(i.connection.target=i[0].contentWindow),c.pm({type:"seamless_connect",target:i.connection.target,url:i.connection.url,data:a,success:function(a){i.seamless_options.onConnect&&i.seamless_options.onConnect(a)}}),i.trigger("connected")},i.seamless_update=function(a){return l&&(k.remove(),l=!1,i.connection.setActive(!0)),a.height>=0&&i.height(a.height).attr("height",a.height+"px"),a},i.seamless_error=function(a){k.remove(),i.hide(),l=!1,r(a.msg,a.linkText,a.afterText,!0)},i}}(window,document,jQuery);